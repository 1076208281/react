

<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>深入 JSX - React</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta property="og:title" content="深入 JSX - React">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://discountry.github.io/react/docs/jsx-in-depth.html">
  <meta property="og:image" content="https://discountry.github.io/react/img/logo_og.png">
  <meta property="og:description" content="A JavaScript library for building user interfaces">
  <meta property="fb:app_id" content="623268441017527">

  <link rel="shortcut icon" href="/react/favicon.ico">
  <link rel="alternate" type="application/rss+xml" title="React" href="https://facebook.github.io/react/feed.xml">

  <link rel="stylesheet" href="/react/css/syntax.css">
  <link rel="stylesheet" href="/react/css/codemirror.css">
  <link rel="stylesheet" href="/react/css/react.css">

  <script src="https://use.typekit.net/qfl6nyj.js"></script>
  <script>try{Typekit.load({ async: true });}catch(e){}</script>

  <!--[if lte IE 8]>
  <script src="https://unpkg.com/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://unpkg.com/es5-shim@4.5.9/es5-shim.min.js"></script>
  <script src="https://unpkg.com/es5-shim@4.5.9/es5-sham.min.js"></script>
  <![endif]-->
  <script src="https://cdn.bootcss.com/codemirror/5.15.2/codemirror.min.js"></script>
  <script src="https://cdn.bootcss.com/codemirror/5.15.2/mode/javascript/javascript.min.js"></script>
  <script src="https://cdn.bootcss.com/codemirror/5.15.2/mode/xml/xml.min.js"></script>
  <script src="https://cdn.bootcss.com/codemirror/5.15.2/mode/jsx/jsx.min.js"></script>
  <script src="https://cdn.bootcss.com/react/15.5.4/react.min.js"></script>
  <script src="https://cdn.bootcss.com/react/15.5.4/react-dom.min.js"></script>
  <script src="https://cdn.bootcss.com/babel-standalone/6.15.0/babel.min.js"></script>
  <script src="/react/js/live_editor.js"></script>
</head>
<body>

  <div class="container">

    <div class="nav-main">
  <div class="wrap">
    <a class="nav-home" href="/react/">
      <img class="nav-logo" src="/react/img/logo.svg" width="36" height="36">
      React
    </a>
    <div class="nav-lists">
      <ul class="nav-site nav-site-internal">
        <li><a href="/react/docs/hello-world.html" class="active">文档</a></li>
        <li><a href="/react/tutorial/tutorial.html">教程</a></li>
        <li><a href="/react/community/support.html">社区</a></li>
        <li><a href="/react/blog/">博客</a></li>
      </ul>
      <ul class="nav-site nav-site-external">
        <li><a href="https://github.com/discountry/react" target="_blank">参与翻译</a></li>
        <li><a href="https://github.com/facebook/react" target="_blank">GitHub</a></li>
        <li><a href="https://github.com/facebook/react/releases" target="_blank">v15.6.1</a></li>
      </ul>
    </div>
  </div>
</div>


    <section class="content wrap documentationContent">
  <div class="inner-content">
    <a class="edit-page-link" href="https://github.com/discountry/react/tree/master/docs/docs/jsx-in-depth.md" target="_blank">纠错</a>
    <h1>
      深入 JSX
    </h1>
    <div class="subHeader"></div>

    <p>本质上来讲，JSX 只是为 <code>React.createElement(component, props, ...children)</code> 方法提供的语法糖。比如下面的代码：</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="o">&lt;</span><span class="nx">MyButton</span> <span class="nx">color</span><span class="o">=</span><span class="s2">&quot;blue&quot;</span> <span class="nx">shadowSize</span><span class="o">=</span><span class="p">{</span><span class="mi">2</span><span class="p">}</span><span class="o">&gt;</span>
  <span class="nx">Click</span> <span class="nx">Me</span>
<span class="o">&lt;</span><span class="err">/MyButton&gt;</span>
</code></pre></div>
<p>编译为：</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span>
  <span class="nx">MyButton</span><span class="p">,</span>
  <span class="p">{</span><span class="nx">color</span><span class="o">:</span> <span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="nx">shadowSize</span><span class="o">:</span> <span class="mi">2</span><span class="p">},</span>
  <span class="s1">&#39;Click Me&#39;</span>
<span class="p">)</span>
</code></pre></div>
<p>如果没有子代，你还可以使用自闭合标签，比如：</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;sidebar&quot;</span> <span class="o">/&gt;</span>
</code></pre></div>
<p>编译为：</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span>
  <span class="s1">&#39;div&#39;</span><span class="p">,</span>
  <span class="p">{</span><span class="nx">className</span><span class="o">:</span> <span class="s1">&#39;sidebar&#39;</span><span class="p">},</span>
  <span class="kc">null</span>
<span class="p">)</span>
</code></pre></div>
<p>如果你想彻底验证 JSX 是如何转换为 JavaScript 的，你可以尝试 <a href="https://babeljs.io/repl/#?babili=false&evaluate=true&lineWrap=false&presets=es2015%2Creact%2Cstage-0&code=function%20hello()%20%7B%0A%20%20return%20%3Cdiv%3EHello%20world!%3C%2Fdiv%3E%3B%0A%7D">在线 Babel 编译器</a>.</p>

<h2>指定 React 元素类型</h2>

<p>JSX 的标签名决定了 React 元素的类型。</p>

<p>大写开头的 JSX 标签表示一个 React 组件。这些标签将会被编译为同名变量并被引用，所以如果你使用了 <code>&lt;Foo /&gt;</code> 表达式，则必须在作用域中先声明 <code>Foo</code> 变量。</p>

<h3>React 必须声明</h3>

<p>由于 JSX 编译后会调用 <code>React.createElement</code> 方法，所以在你的 JSX 代码中必须首先声明 <code>React</code> 变量。</p>

<p>比如，下面两个导入都是必须的，尽管 <code>React</code> 和 <code>CustomButton</code> 都没有在代码中被直接调用。</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="hll"><span class="kr">import</span> <span class="nx">React</span> <span class="nx">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>
</span><span class="hll"><span class="kr">import</span> <span class="nx">CustomButton</span> <span class="nx">from</span> <span class="s1">&#39;./CustomButton&#39;</span><span class="p">;</span>
</span>
<span class="kd">function</span> <span class="nx">WarningButton</span><span class="p">()</span> <span class="p">{</span>
<span class="hll">  <span class="c1">// 返回 React.createElement(CustomButton, {color: &#39;red&#39;}, null);</span>
</span>  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">CustomButton</span> <span class="nx">color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span> <span class="o">/&gt;</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>如果你使用 <code>&lt;script&gt;</code> 加载 React，它将作用于全局。</p>

<h3>点表示法</h3>

<p>你还可以使用 JSX 中的点表示法来引用 React 组件。你可以方便地从一个模块中导出许多 React 组件。例如，有一个名为 <code>MyComponents.DataPicker</code> 的组件，你可以直接在 JSX 中使用它：</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="kr">import</span> <span class="nx">React</span> <span class="nx">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">MyComponents</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">DatePicker</span><span class="o">:</span> <span class="kd">function</span> <span class="nx">DatePicker</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nx">Imagine</span> <span class="nx">a</span> <span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">color</span><span class="p">}</span> <span class="nx">datepicker</span> <span class="nx">here</span><span class="p">.</span><span class="o">&lt;</span><span class="err">/div&gt;;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">BlueDatePicker</span><span class="p">()</span> <span class="p">{</span>
<span class="hll">  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">MyComponents</span><span class="p">.</span><span class="nx">DatePicker</span> <span class="nx">color</span><span class="o">=</span><span class="s2">&quot;blue&quot;</span> <span class="o">/&gt;</span><span class="p">;</span>
</span><span class="p">}</span>
</code></pre></div>
<h3>首字母大写</h3>

<p>当元素类型以小写字母开头时，它表示一个内置的组件，如 <code>&lt;div&gt;</code> 或 <code>&lt;span&gt;</code>，并将字符串 &#39;div&#39; 或 &#39;span&#39; 传 递给 <code>React.createElement</code>。 以大写字母开头的类型，如 <code>&lt;Foo /&gt;</code> 编译为 <code>React.createElement(Foo)</code>，并它正对应于你在 JavaScript 文件中定义或导入的组件。</p>

<p>我们建议用大写开头命名组件。如果你的组件以小写字母开头，请在 JSX 中使用之前其赋值给大写开头的变量。</p>

<p>例如，下面的代码将无法按预期运行：</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="kr">import</span> <span class="nx">React</span> <span class="nx">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>

<span class="hll"><span class="c1">// 错误！组件名应该首字母大写:</span>
</span><span class="hll"><span class="kd">function</span> <span class="nx">hello</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
</span>  <span class="c1">// 正确！div 是有效的 HTML 标签:</span>
  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nx">Hello</span> <span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">toWhat</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/div&gt;;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">HelloWorld</span><span class="p">()</span> <span class="p">{</span>
<span class="hll">  <span class="c1">// 错误！React 会将小写开头的标签名认为是 HTML 原生标签:</span>
</span><span class="hll">  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">hello</span> <span class="nx">toWhat</span><span class="o">=</span><span class="s2">&quot;World&quot;</span> <span class="o">/&gt;</span><span class="p">;</span>
</span><span class="p">}</span>
</code></pre></div>
<p>为了解决这个问题，我们将 <code>hello</code> 重命名为 <code>Hello</code>，然后使用 <code>&lt;Hello /&gt;</code> 引用：</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="kr">import</span> <span class="nx">React</span> <span class="nx">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>

<span class="hll"><span class="c1">// 正确！组件名应该首字母大写:</span>
</span><span class="hll"><span class="kd">function</span> <span class="nx">Hello</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
</span>  <span class="c1">// 正确！div 是有效的 HTML 标签:</span>
  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nx">Hello</span> <span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">toWhat</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/div&gt;;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">HelloWorld</span><span class="p">()</span> <span class="p">{</span>
<span class="hll">  <span class="c1">// 正确！React 能够将大写开头的标签名认为是 React 组件。</span>
</span><span class="hll">  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">Hello</span> <span class="nx">toWhat</span><span class="o">=</span><span class="s2">&quot;World&quot;</span> <span class="o">/&gt;</span><span class="p">;</span>
</span><span class="p">}</span>
</code></pre></div>
<h3>在运行时选择类型</h3>

<p>你不能使用表达式来作为 React 元素的标签。如果你的确想通过表达式来确定 React 元素的类型，请先将其赋值给大写开头的变量。这种情况一般会在你想通过属性值条件渲染组件时出现：</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="kr">import</span> <span class="nx">React</span> <span class="nx">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">PhotoStory</span><span class="p">,</span> <span class="nx">VideoStory</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./stories&#39;</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">components</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">photo</span><span class="o">:</span> <span class="nx">PhotoStory</span><span class="p">,</span>
  <span class="nx">video</span><span class="o">:</span> <span class="nx">VideoStory</span>
<span class="p">};</span>

<span class="kd">function</span> <span class="nx">Story</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
<span class="hll">  <span class="c1">// 错误！JSX 标签名不能为一个表达式。</span>
</span><span class="hll">  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">components</span><span class="p">[</span><span class="nx">props</span><span class="p">.</span><span class="nx">storyType</span><span class="p">]</span> <span class="nx">story</span><span class="o">=</span><span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">story</span><span class="p">}</span> <span class="o">/&gt;</span><span class="p">;</span>
</span><span class="p">}</span>
</code></pre></div>
<p>要解决这个问题，我们需要先将类型赋值给大写开头的变量。</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="kr">import</span> <span class="nx">React</span> <span class="nx">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">PhotoStory</span><span class="p">,</span> <span class="nx">VideoStory</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./stories&#39;</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">components</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">photo</span><span class="o">:</span> <span class="nx">PhotoStory</span><span class="p">,</span>
  <span class="nx">video</span><span class="o">:</span> <span class="nx">VideoStory</span>
<span class="p">};</span>

<span class="kd">function</span> <span class="nx">Story</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
<span class="hll">  <span class="c1">// 正确！JSX 标签名可以为大写开头的变量。</span>
</span><span class="hll">  <span class="kr">const</span> <span class="nx">SpecificStory</span> <span class="o">=</span> <span class="nx">components</span><span class="p">[</span><span class="nx">props</span><span class="p">.</span><span class="nx">storyType</span><span class="p">];</span>
</span><span class="hll">  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">SpecificStory</span> <span class="nx">story</span><span class="o">=</span><span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">story</span><span class="p">}</span> <span class="o">/&gt;</span><span class="p">;</span>
</span><span class="p">}</span>
</code></pre></div>
<h2>属性</h2>

<p>在 JSX 中有几种不同的方式来指定属性。</p>

<h3>使用 JavaScript 表达式</h3>

<p>你可以传递任何 <code>{}</code> 包裹的 JavaScript 表达式作为一个属性值。例如，在这个 JSX 中：</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="o">&lt;</span><span class="nx">MyComponent</span> <span class="nx">foo</span><span class="o">=</span><span class="p">{</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">+</span> <span class="mi">4</span><span class="p">}</span> <span class="o">/&gt;</span>
</code></pre></div>
<p>对于 <code>MyComponent</code>来说， <code>props.foo</code> 的值为 10，这是 <code>1 + 2 + 3 + 4</code> 表达式计算得出的。</p>

<p><code>if</code> 语句和 <code>for</code> 循环在 JavaScript 中不是表达式，因此它们不能直接在 JSX 中使用，所以你可以将它们放在周围的代码中。</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="kd">function</span> <span class="nx">NumberDescriber</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">description</span><span class="p">;</span>
<span class="hll">  <span class="k">if</span> <span class="p">(</span><span class="nx">props</span><span class="p">.</span><span class="nx">number</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span><span class="hll">    <span class="nx">description</span> <span class="o">=</span> <span class="o">&lt;</span><span class="nx">strong</span><span class="o">&gt;</span><span class="nx">even</span><span class="o">&lt;</span><span class="err">/strong&gt;;</span>
</span><span class="hll">  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class="hll">    <span class="nx">description</span> <span class="o">=</span> <span class="o">&lt;</span><span class="nx">i</span><span class="o">&gt;</span><span class="nx">odd</span><span class="o">&lt;</span><span class="err">/i&gt;;</span>
</span><span class="hll">  <span class="p">}</span>
</span>  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">number</span><span class="p">}</span> <span class="nx">is</span> <span class="nx">an</span> <span class="p">{</span><span class="nx">description</span><span class="p">}</span> <span class="nx">number</span><span class="o">&lt;</span><span class="err">/div&gt;;</span>
<span class="p">}</span>
</code></pre></div>
<p>你可以在相关部分中了解有关 <a href="/react/docs/conditional-rendering.html">条件渲染</a> 和 <a href="/react/docs/lists-and-keys.html">循环</a> 的更多信息。</p>

<h3>字符串常量</h3>

<p>你可以将字符串常量作为属性值传递。下面这两个 JSX 表达式是等价的：</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="o">&lt;</span><span class="nx">MyComponent</span> <span class="nx">message</span><span class="o">=</span><span class="s2">&quot;hello world&quot;</span> <span class="o">/&gt;</span>

<span class="o">&lt;</span><span class="nx">MyComponent</span> <span class="nx">message</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;hello world&#39;</span><span class="p">}</span> <span class="o">/&gt;</span>
</code></pre></div>
<p>当你传递一个字符串常量时，它不会对其进行 HTML 转义，所以下面两个 JSX 表达式是相同的：</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="o">&lt;</span><span class="nx">MyComponent</span> <span class="nx">message</span><span class="o">=</span><span class="s2">&quot;&amp;lt;3&quot;</span> <span class="o">/&gt;</span>

<span class="o">&lt;</span><span class="nx">MyComponent</span> <span class="nx">message</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;&lt;3&#39;</span><span class="p">}</span> <span class="o">/&gt;</span>
</code></pre></div>
<p>这种行为通常是无意义的，提到它只是为了完整性。</p>

<h3>默认为 True</h3>

<p>如果你没有给属性传值，它默认为 <code>true</code>。因此下面两个 JSX 是等价的：</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="o">&lt;</span><span class="nx">MyTextBox</span> <span class="nx">autocomplete</span> <span class="o">/&gt;</span>

<span class="o">&lt;</span><span class="nx">MyTextBox</span> <span class="nx">autocomplete</span><span class="o">=</span><span class="p">{</span><span class="kc">true</span><span class="p">}</span> <span class="o">/&gt;</span>
</code></pre></div>
<p>一般情况下，我们不建议这样使用，因为它会与 <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Object_initializer#New_notations_in_ECMAScript_2015">ES6 对象简洁表示法</a> 混淆。比如 <code>{foo}</code> 是 <code>{foo: foo}</code> 的简写，而不是 <code>{foo: true}</code>。这里能这样用，是因为它符合 HTML 的做法。</p>

<h3>扩展属性</h3>

<p>如果你已经有了个 <code>props</code> 对象，并且想在 JSX 中传递它，你可以使用 <code>...</code> 作为扩展操作符来传递整个属性对象。下面两个组件是等效的：</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="kd">function</span> <span class="nx">App1</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">Greeting</span> <span class="nx">firstName</span><span class="o">=</span><span class="s2">&quot;Ben&quot;</span> <span class="nx">lastName</span><span class="o">=</span><span class="s2">&quot;Hector&quot;</span> <span class="o">/&gt;</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">App2</span><span class="p">()</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">props</span> <span class="o">=</span> <span class="p">{</span><span class="nx">firstName</span><span class="o">:</span> <span class="s1">&#39;Ben&#39;</span><span class="p">,</span> <span class="nx">lastName</span><span class="o">:</span> <span class="s1">&#39;Hector&#39;</span><span class="p">};</span>
<span class="hll">  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">Greeting</span> <span class="p">{...</span><span class="nx">props</span><span class="p">}</span> <span class="o">/&gt;</span><span class="p">;</span>
</span><span class="p">}</span>
</code></pre></div>
<p>当你构建通用容器时，扩展属性会非常有用。然而，这样做也可能让很多不相关的属性，传递到不需要它们的组件中使代码变得混乱。我们建议你谨慎使用此语法。</p>

<h2>子代</h2>

<p>在包含开始和结束标签的 JSX 表达式中，标记之间的内容作为特殊的参数传递：<code>props.children</code>。有几种不同的方法来传递子代：</p>

<h3>字符串常量</h3>

<p>你可以在开始和结束标签之间放入一个字符串，则 <code>props.children</code> 就是那个字符串。这对于许多内置 HTML 元素很有用。例如：</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="o">&lt;</span><span class="nx">MyComponent</span><span class="o">&gt;</span><span class="nx">Hello</span> <span class="nx">world</span><span class="o">!&lt;</span><span class="err">/MyComponent&gt;</span>
</code></pre></div>
<p>这是有效的 JSX，并且 <code>MyComponent</code> 的 <code>props.children</code> 值将会直接是 <code>&quot;hello world!&quot;</code>。因为 HTML 未转义，所以你可以像写 HTML 一样写 JSX：</p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span></span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>This is valid HTML <span class="ni">&amp;amp;</span> JSX at the same time.<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>
<p>JSX 会移除行空行和开始和结尾处的空格。标签邻近的新行也会被移除，字符串常量内部的换行会被压缩成一个空格，所以下面这些都等价：</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nx">Hello</span> <span class="nx">World</span><span class="o">&lt;</span><span class="err">/div&gt;</span>

<span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
  <span class="nx">Hello</span> <span class="nx">World</span>
<span class="o">&lt;</span><span class="err">/div&gt;</span>

<span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
  <span class="nx">Hello</span>
  <span class="nx">World</span>
<span class="o">&lt;</span><span class="err">/div&gt;</span>

<span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>

  <span class="nx">Hello</span> <span class="nx">World</span>
<span class="o">&lt;</span><span class="err">/div&gt;</span>
</code></pre></div>
<h3>JSX</h3>

<p>你可以通过子代嵌入更多的 JSX 元素，这对于嵌套显示组件非常有用：</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="o">&lt;</span><span class="nx">MyContainer</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">MyFirstComponent</span> <span class="o">/&gt;</span>
  <span class="o">&lt;</span><span class="nx">MySecondComponent</span> <span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="err">/MyContainer&gt;</span>
</code></pre></div>
<p>你可以混合不同类型的子元素，同时用字符串常量和 JSX 子元素，这是 JSX 类似 HTML 的另一种形式，这在 JSX 和 HTML 中都是有效的：
<code>html
&lt;div&gt;
  Here is a list:
  &lt;ul&gt;
    &lt;li&gt;Item 1&lt;/li&gt;
    &lt;li&gt;Item 2&lt;/li&gt;
  &lt;/ul&gt;
&lt;/div&gt;
</code></p>

<p>一个 React 组件不能返回多个 React 元素，但是单个 JSX 表达式可以有多个子元素，因此，如果你希望一个组件渲染多个元素，你可以用 <code>&lt;div&gt;</code> 将其包起来。</p>

<h3>JavsScript 表达式</h3>

<p>你可以将任何 <code>{}</code> 包裹的 JavaScript 表达式作为子代传递。例如，下面这些表达式是等价的：</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="o">&lt;</span><span class="nx">MyComponent</span><span class="o">&gt;</span><span class="nx">foo</span><span class="o">&lt;</span><span class="err">/MyComponent&gt;</span>

<span class="o">&lt;</span><span class="nx">MyComponent</span><span class="o">&gt;</span><span class="p">{</span><span class="s1">&#39;foo&#39;</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/MyComponent&gt;</span>
</code></pre></div>
<p>这对于渲染任意长度的 JSX 表达式的列表很有用。例如，下面将会渲染一个 HTML 列表：</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="kd">function</span> <span class="nx">Item</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
<span class="hll">  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">li</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">message</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/li&gt;;</span>
</span><span class="p">}</span>

<span class="kd">function</span> <span class="nx">TodoList</span><span class="p">()</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">todos</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;finish doc&#39;</span><span class="p">,</span> <span class="s1">&#39;submit pr&#39;</span><span class="p">,</span> <span class="s1">&#39;nag dan to review&#39;</span><span class="p">];</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">ul</span><span class="o">&gt;</span>
<span class="hll">      <span class="p">{</span><span class="nx">todos</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">message</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="o">&lt;</span><span class="nx">Item</span> <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">message</span><span class="p">}</span> <span class="nx">message</span><span class="o">=</span><span class="p">{</span><span class="nx">message</span><span class="p">}</span> <span class="o">/&gt;</span><span class="p">)}</span>
</span>    <span class="o">&lt;</span><span class="err">/ul&gt;</span>
  <span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>JavsScript 表达式可以与其他类型的子代混合使用。这通常对于字符串模板非常有用：</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="kd">function</span> <span class="nx">Hello</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
<span class="hll">  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nx">Hello</span> <span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">addressee</span><span class="p">}</span><span class="o">!&lt;</span><span class="err">/div&gt;;</span>
</span><span class="p">}</span>
</code></pre></div>
<h3>函数</h3>

<p>通常情况下，插入 JSX 中的 JavsScript 表达式将被认作字符串、React 元素或这些内容的列表。然而，<code>props.children</code> 可以像其它属性一样传递任何数据，而不仅仅是 React 元素。例如，如果你使用自定义组件，则可以将调用 <code>props.children</code> 来获得传递的子代：</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="c1">// Calls the children callback numTimes to produce a repeated component</span>
<span class="kd">function</span> <span class="nx">Repeat</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">items</span> <span class="o">=</span> <span class="p">[];</span>
<span class="hll">  <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">props</span><span class="p">.</span><span class="nx">numTimes</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span>    <span class="nx">items</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">props</span><span class="p">.</span><span class="nx">children</span><span class="p">(</span><span class="nx">i</span><span class="p">));</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">items</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/div&gt;;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">ListOfTenThings</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">Repeat</span> <span class="nx">numTimes</span><span class="o">=</span><span class="p">{</span><span class="mi">10</span><span class="p">}</span><span class="o">&gt;</span>
<span class="hll">      <span class="p">{(</span><span class="nx">index</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">index</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">This</span> <span class="nx">is</span> <span class="nx">item</span> <span class="p">{</span><span class="nx">index</span><span class="p">}</span> <span class="k">in</span> <span class="nx">the</span> <span class="nx">list</span><span class="o">&lt;</span><span class="err">/div&gt;}</span>
</span>    <span class="o">&lt;</span><span class="err">/Repeat&gt;</span>
  <span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>传递给自定义组件的子代可以是任何元素，只要该组件在 React 渲染前将其转换成 React 能够理解的东西。这个用法并不常见，但当你想扩展 JSX 时可以使用。</p>

<h3>布尔值、Null 和 Undefined 被忽略</h3>

<p><code>false</code>、<code>null</code>、<code>undefined</code> 和 <code>true</code> 都是有效的子代，但它们不会直接被渲染。下面的表达式是等价的：</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="o">&lt;</span><span class="nx">div</span> <span class="o">/&gt;</span>

<span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;&lt;</span><span class="err">/div&gt;</span>

<span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="p">{</span><span class="kc">false</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/div&gt;</span>

<span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="p">{</span><span class="kc">null</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/div&gt;</span>

<span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="p">{</span><span class="kc">undefined</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/div&gt;</span>

<span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="p">{</span><span class="kc">true</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/div&gt;</span>
</code></pre></div>
<p>这样就可以方便的条件渲染 React 元素。当 <code>showHeader</code> 为 <code>true</code> 时，下面这个组件将只渲染一个 <code>&lt;Header /&gt;</code>。</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
<span class="hll">  <span class="p">{</span><span class="nx">showHeader</span> <span class="o">&amp;&amp;</span> <span class="o">&lt;</span><span class="nx">Header</span> <span class="o">/&gt;</span><span class="p">}</span>
</span>  <span class="o">&lt;</span><span class="nx">Content</span> <span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="err">/div&gt;</span>
</code></pre></div>
<p>值得注意的是，React 提供了一些 <a href="https://developer.mozilla.org/en-US/docs/Glossary/Falsy">&quot;falsy&quot; 值</a> （即， 除了false 外，0，“”，null，undefined 和 NaN），它们依然会被渲染。例如，下面的代码不会像你预期的那样运行，因为当 <code>props.message</code> 为空数组时，它会打印 0：</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
<span class="hll">  <span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">messages</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span>
</span>    <span class="o">&lt;</span><span class="nx">MessageList</span> <span class="nx">messages</span><span class="o">=</span><span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">messages</span><span class="p">}</span> <span class="o">/&gt;</span>
  <span class="p">}</span>
<span class="o">&lt;</span><span class="err">/div&gt;</span>
</code></pre></div>
<p>要解决这个问题，请确保 <code>&amp;&amp;</code> 前面的表达式始终为布尔值：</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
<span class="hll">  <span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">messages</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span>
</span>    <span class="o">&lt;</span><span class="nx">MessageList</span> <span class="nx">messages</span><span class="o">=</span><span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">messages</span><span class="p">}</span> <span class="o">/&gt;</span>
  <span class="p">}</span>
<span class="o">&lt;</span><span class="err">/div&gt;</span>
</code></pre></div>
<p>相反，如果你想让类似 <code>false</code>、<code>true</code>、<code>null</code> 或 <code>undefined</code> 出现在输出中，你必须先把它<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String#String_conversion">转换成字符串</a> :</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
<span class="hll">  <span class="nx">My</span> <span class="nx">JavaScript</span> <span class="nx">variable</span> <span class="nx">is</span> <span class="p">{</span><span class="nb">String</span><span class="p">(</span><span class="nx">myVariable</span><span class="p">)}.</span>
</span><span class="o">&lt;</span><span class="err">/div&gt;</span>
</code></pre></div>

    <div class="docs-prevnext">
      
      
    </div>
  </div>

  <div class="nav-docs">
  <!-- Docs Nav -->
  
    <div class="nav-docs-section">
      <h3>快速开始</h3>
      <ul>
        
          <li>
            <a href="/react/docs/installation.html">安装</a>
            
          </li>
        
          <li>
            <a href="/react/docs/hello-world.html">Hello World</a>
            
          </li>
        
          <li>
            <a href="/react/docs/introducing-jsx.html">JSX 简介</a>
            
          </li>
        
          <li>
            <a href="/react/docs/rendering-elements.html">元素渲染</a>
            
          </li>
        
          <li>
            <a href="/react/docs/components-and-props.html">组件 & Props</a>
            
          </li>
        
          <li>
            <a href="/react/docs/state-and-lifecycle.html">State & 生命周期</a>
            
          </li>
        
          <li>
            <a href="/react/docs/handling-events.html">事件处理</a>
            
          </li>
        
          <li>
            <a href="/react/docs/conditional-rendering.html">条件渲染</a>
            
          </li>
        
          <li>
            <a href="/react/docs/lists-and-keys.html">列表 & Keys</a>
            
          </li>
        
          <li>
            <a href="/react/docs/forms.html">表单</a>
            
          </li>
        
          <li>
            <a href="/react/docs/lifting-state-up.html">状态提升</a>
            
          </li>
        
          <li>
            <a href="/react/docs/composition-vs-inheritance.html">组合 vs 继承</a>
            
          </li>
        
          <li>
            <a href="/react/docs/thinking-in-react.html">React 理念</a>
            
          </li>
        
      </ul>
    </div>
  
    <div class="nav-docs-section">
      <h3>高级指引</h3>
      <ul>
        
          <li>
            <a href="/react/docs/jsx-in-depth.html" class="active">深入 JSX</a>
            
          </li>
        
          <li>
            <a href="/react/docs/typechecking-with-proptypes.html">使用 PropTypes 检查类型</a>
            
          </li>
        
          <li>
            <a href="/react/docs/refs-and-the-dom.html">Refs & DOM</a>
            
          </li>
        
          <li>
            <a href="/react/docs/uncontrolled-components.html">非受控组件</a>
            
          </li>
        
          <li>
            <a href="/react/docs/optimizing-performance.html">性能优化</a>
            
          </li>
        
          <li>
            <a href="/react/docs/react-without-es6.html">不使用 ES6</a>
            
          </li>
        
          <li>
            <a href="/react/docs/react-without-jsx.html">不使用 JSX</a>
            
          </li>
        
          <li>
            <a href="/react/docs/reconciliation.html">Reconciliation</a>
            
          </li>
        
          <li>
            <a href="/react/docs/context.html">Context</a>
            
          </li>
        
          <li>
            <a href="/react/docs/web-components.html">Web Components</a>
            
          </li>
        
          <li>
            <a href="/react/docs/higher-order-components.html">高阶组件</a>
            
          </li>
        
          <li>
            <a href="/react/docs/integrating-with-other-libraries.html">与第三方库协同</a>
            
          </li>
        
          <li>
            <a href="/react/docs/accessibility.html">可访问性</a>
            
          </li>
        
      </ul>
    </div>
  
    <div class="nav-docs-section">
      <h3>参考(本节已翻译)</h3>
      <ul>
        
          <li>
            <a href="/react/docs/react-api.html">React</a>
            
              <ul>
                
                  <li>
                    <a href="/react/docs/react-component.html">React.Component</a>
                  </li>
                
              </ul>
            
          </li>
        
          <li>
            <a href="/react/docs/react-dom.html">ReactDOM</a>
            
          </li>
        
          <li>
            <a href="/react/docs/react-dom-server.html">ReactDOMServer</a>
            
          </li>
        
          <li>
            <a href="/react/docs/dom-elements.html">DOM Elements</a>
            
          </li>
        
          <li>
            <a href="/react/docs/events.html">SyntheticEvent</a>
            
          </li>
        
          <li>
            <a href="/react/docs/test-utils.html">Test Utilities</a>
            
          </li>
        
          <li>
            <a href="/react/docs/shallow-renderer.html">Shallow Renderer</a>
            
          </li>
        
      </ul>
    </div>
  

  <!-- Contributing Nav -->
  
    <div class="nav-docs-section">
      <h3>贡献</h3>
      <ul>
        
          <li>
            <a href="/react/contributing/how-to-contribute.html">如何参与</a>
          </li>
        
          <li>
            <a href="/react/contributing/codebase-overview.html">源码总览</a>
          </li>
        
          <li>
            <a href="/react/contributing/implementation-notes.html">实现说明</a>
          </li>
        
          <li>
            <a href="/react/contributing/design-principles.html">设计理念</a>
          </li>
        
      </ul>
    </div>
  

</div>

</section>


    <footer class="nav-footer">
  <section class="sitemap">
    <a href="/react/" class="nav-home">
    </a>
    <div>
      <h5><a href="/react/docs/">文档</a></h5>
      <a href="/react/docs/hello-world.html">快速开始</a>
      <a href="/react/docs/thinking-in-react.html">React 理念</a>
      <a href="/react/tutorial/tutorial.html">上手教程</a>
      <a href="/react/docs/jsx-in-depth.html">高级指引</a>
    </div>
    <div>
      <h5><a href="/react/community/support.html">社区</a></h5>
      <a href="http://stackoverflow.com/questions/tagged/reactjs" target="_blank">Stack Overflow</a>
      <a href="https://discuss.reactjs.org/" target="_blank">论坛</a>
      <a href="https://discord.gg/0ZcbPKXt5bZjGY5n" target="_blank">Reactiflux Chat</a>
      <a href="https://www.facebook.com/react" target="_blank">Facebook</a>
      <a href="https://twitter.com/reactjs" target="_blank">Twitter</a>
    </div>
    <div>
      <h5><a href="/react/community/support.html">资源</a></h5>
      <a href="/react/community/conferences.html">讨论会</a>
      <a href="/react/community/videos.html">视频</a>
      <a href="https://github.com/facebook/react/wiki/Examples" target="_blank">示例</a>
      <a href="https://github.com/facebook/react/wiki/Complementary-Tools" target="_blank">开发工具</a>
    </div>
    <div>
      <h5>更多</h5>
      <a href="/react/blog/">博客</a>
      <a href="https://github.com/facebook/react" target="_blank">GitHub</a>
      <a href="http://facebook.github.io/react-native/" target="_blank">React Native</a>
      <a href="/react/acknowledgements.html">致谢</a>
    </div>
  </section>
  <a href="https://code.facebook.com/projects/" target="_blank" class="fbOpenSource">
    <img src="/react/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/>
  </a>
  <section class="copyright">
    Copyright © 2017 Facebook Inc.
      <br />
    <a href="https://zhuanlan.zhihu.com/icode" target="_blank">从零学习前端开发翻译组</a> | <a href="http://react-china.org/" target="_blank">React 中文社区</a> | <a href="https://docschina.org/" target="_blank">印记中文</a>
  </section>
</footer>

  </div>

  <div id="fb-root"></div>
  <script src="/react/js/anchor-links.js"></script>
  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?90a1e60298dddada1b7ae4159625031b";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })(); 
  </script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-45453476-6', 'auto');
    ga('send', 'pageview');
</script>
</body>
</html>
